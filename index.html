<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Happy New Year dari Mas Patrik</title>

<style>
html, body {
  margin: 0;
  padding: 0;
  overflow: hidden;
  background: radial-gradient(circle at bottom, #050a18, #000);
  font-family: sans-serif;
}

canvas { display: block; }

#hint {
  position: absolute;
  top: 12%;
  left: 50%;
  transform: translateX(-50%);
  color: #fff;
  opacity: 0.8;
  text-align: center;
  font-size: 1.2rem;
}

#name {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 90%;
  max-width: 720px;
  font-size: clamp(1rem, 4vw, 2.2rem);
  line-height: 1.6;
  text-align: center;
  color: #ffdddd;
  text-shadow:
    0 0 5px #fff,
    0 0 10px #ff4d6d,
    0 0 20px #ff4d6d,
    0 0 30px #ff4d6d;
  opacity: 1; /* Tetap muncul */
  pointer-events: none;
}
</style>
</head>

<body>

<canvas id="c"></canvas>

<div id="hint">Happy New Year, sayang </div>

<div id="name">
Terima kasih untuk setiap tawa dan kebersamaan yang kita lewati tahun kemarin. Kamu bukan cuma bagian dari hariku, tapi juga tempat aku merasa tenang dan bahagia. Di tahun baru ini, aku berharap kita terus bersama, saling menguatkan, dan menjalani setiap momen dengan kamu. Tahun boleh berganti, tapi perasaanku tetap sama: memilih kamu, hari ini, besok, dan seterusnya. ðŸ’–âœ¨

<audio id="music" src="lagu kembang api.mp3" loop></audio>

<script>
const c = document.getElementById('c');
const ctx = c.getContext('2d');
const name = document.getElementById('name');
const music = document.getElementById('music');

music.volume = 0;
let musicStarted = false;

function fadeInMusic(){
  let v = 0;
  const fade = setInterval(()=>{
    v += 0.02;
    if(v >= 0.6){
      v = 0.6;
      clearInterval(fade);
    }
    music.volume = v;
  }, 100);
}

function resize(){
  c.width = innerWidth;
  c.height = innerHeight;
}
addEventListener('resize', resize);
resize();

let rockets = [];
let particles = [];

class Rocket {
  constructor(x) {
    this.x = x;
    this.y = c.height + 20;
    this.vy = -15 - Math.random()*4;
    this.explodeY = Math.random()*c.height*0.4 + c.height*0.2;
  }
  update() {
    this.y += this.vy;
    this.vy += 0.15;
    if(this.y <= this.explodeY){
      explode(this.x, this.y);
      return false;
    }
    return true;
  }
  draw() {
    ctx.fillStyle = '#fff';
    ctx.beginPath();
    ctx.arc(this.x, this.y, 3, 0, Math.PI*2);
    ctx.fill();
  }
}

class Particle {
  constructor(x,y,vx,vy,color){
    this.x=x; this.y=y;
    this.vx=vx; this.vy=vy;
    this.life=90;
    this.color=color;
  }
  update(){
    this.vy += 0.05;
    this.x += this.vx;
    this.y += this.vy;
    this.life--;
  }
  draw(){
    ctx.globalAlpha = this.life/90;
    ctx.fillStyle = this.color;
    ctx.beginPath();
    ctx.arc(this.x,this.y,3,0,Math.PI*2);
    ctx.fill();
    ctx.globalAlpha = 1;
  }
}

function explode(x,y){
  for(let i=0;i<120;i++){
    const a=Math.random()*Math.PI*2;
    const s=Math.random()*6+3;
    particles.push(new Particle(
      x,y,
      Math.cos(a)*s,
      Math.sin(a)*s,
      '#ffd166'
    ));
  }

  setTimeout(()=>{
    for(let i=0;i<80;i++){
      const a=Math.random()*Math.PI*2;
      const s=Math.random()*4+2;
      particles.push(new Particle(
        x,y,
        Math.cos(a)*s,
        Math.sin(a)*s,
        '#ffffff'
      ));
    }
    heart(x,y);
  },120);
}

function heart(x,y){
  for(let t=0;t<Math.PI*2;t+=0.18){
    const r=12*(1-Math.sin(t));
    particles.push(new Particle(
      x,y,
      Math.cos(t)*r*0.35,
      -Math.sin(t)*r*0.35,
      '#ff4d6d'
    ));
  }
}

function animate(){
  requestAnimationFrame(animate);
  ctx.fillStyle='rgba(0,0,0,0.08)';
  ctx.fillRect(0,0,c.width,c.height);

  for(let i=rockets.length-1;i>=0;i--){
    if(!rockets[i].update()) rockets.splice(i,1);
    else rockets[i].draw();
  }

  for(let i=particles.length-1;i>=0;i--){
    particles[i].update();
    particles[i].draw();
    if(particles[i].life<=0) particles.splice(i,1);
  }
}

setInterval(()=>{
  rockets.push(new Rocket(Math.random()*c.width));
},600);

c.addEventListener('click', e=>{
  rockets.push(new Rocket(e.clientX));

  if(!musicStarted){
    music.play().then(()=>{
      fadeInMusic();
      musicStarted = true;
    }).catch(()=>{});
  }
});

animate();
</script>

</body>
</html>




